<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google" content="notranslate">
    <title>COVID-19 Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=K2D:wght@100;300;700&display=swap">

    <link rel="stylesheet" type="text/css" href="covid19.css" />

</head>

<body class="black">

    <div class="row center-align">
        <h1 class="white-text ">สถานการณ์ประเทศไทย</h1>
        <div class="col s12 red darken-2 white-text z-depth-3">
            <div class="">
                <p class="is-size-4">ติดเชื้อสะสม</p>
                <p class="is-size-1 has-text-weight-bold" id="Confirmed"></p>
                <p class="is-size-6 " id="NewConfirmed"></p>
            </div>
        </div>
    </div>
    <div class="row center-align equal-col">
        <div class="col s4 cyan darken-1 white-text z-depth-3">
            <p class="is-size-4">หายแล้ว</p>
            <p class="is-size-1 has-text-weight-bold" id="Recovered"></p>
            <p class="is-size-6" id="NewRecovered"></p>
        </div>
        <div class="col s4 lime white-txt z-depth-3">
            <p class="is-size-4">รักษาอยู่ใน รพ.</p>
            <p class="is-size-1 has-text-weight-bold" id="Hospitalized"></p>
            <p class="is-size-6" id="NewHospitalized"></p>
        </div>
        <div class="col s4 grey darken-3 white-text z-depth-3">
            <p class="is-size-4">เสียชีวิต</p>
            <p class="is-size-1 has-text-weight-bold" id="Deaths"></p>
            <p class="is-size-6" id="NewDeaths"></p>
        </div>
    </div>
    <div class="row center-align">
        <h1 class="white-text">สถานการณ์จังหวัดอ่างทอง</h1>
        <div class="row equal-col white-text">
            <div class="col s4 pink accent-3 z-depth-3 valign-wrapper">
                <div class="col s12">
                <p class="is-size-5">ผู้ป่วยติดเชื้อ</p>
                <p class="is-size-1 has-text-weight-bold" id="ผู้ป่วยติดเชื้อ"></p>
                </div>
            </div>
            <div class="col s8 pink darken-2 z-depth-1">
                <p class="is-size-5">ผู้ป่วยเข้าเกณฑ์สงสัย PUI/เสี่ยงสูง</p>
                <p class="is-size-1 has-text-weight-bold" id="ส่งตรวจห้องปฏิบัติการ"></p>
                <div class="row">
                    <div class="col s6 pink darken-3">
                        <p class="is-size-6 ">ไม่พบเชื้อ</p>
                        <p class="is-size-3 has-text-weight-bold" id="ไม่พบเชื้อpuiสะสม"></p>
                    </div>
                    <div class="col s6 pink darken-4">
                        <p class="is-size-6">รอผล</p>
                        <p class="is-size-3 has-text-weight-bold" id="รอผลpuiสะสม"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row center-align">
        <div class="col s12 purple darken-3 white-text">
            <p class="is-size-4 ">ผู้เดินทางเข้าอ่างทองทั้งหมด</p>
            <p class="is-size-1 has-text-weight-bold" id="เข้าอ่างทองทั้งหมด"></p>
        </div>
    </div>
    <div class="row center-align equal-col">
        <div class="col s4 orange darken-4 z-depth-3 white-text valign-wrapper">
            <div class="col s12">
                <p class="is-size-5">ในประเทศ</p>
                <p class="is-size-1 has-text-weight-bold" id="ในประเทศทั้งหมด"></p>
            </div>
        </div>
        <div class="col s8 amber z-depth-3">
            <p class="is-size-5 ">ต่างประเทศ</p>
            <p class="is-size-1 has-text-weight-bold" id="ต่างประเทศทั้งหมด"></p>
            <p class="is-size-5 ">อยู่ระหว่างกักตัว</p>
            <p class="is-size-2 has-text-weight-bold" id="อยู่ระหว่างเฝ้าระวัง"></p>
            <div class="row ">
                    <div class="col s4 amber darken-4">

                        <p class="is-size-6">เขตติดโรค</p>
                        <p class="is-size-3 has-text-weight-bold" id="เขตติดต่ออันตราย"></p>
                    </div>
                    <div class="col s4 amber darken-3">
                        <p class="is-size-6">พื้นที่ระบาดต่อเนื่อง</p>
                        <p class="is-size-3 has-text-weight-bold" id="เขตระบาดต่อเนื่อง"></p>
                    </div>
                    <div class="col s4 amber darken-2">
                        <p class="is-size-6">ประเทศอื่นๆ</p>
                        <p class="is-size-3 has-text-weight-bold" id="ประเภทอื่นๆ"></p>
                    </div>
                </div>
        </div>
    </div>


    <footer class="row grey-text text-darken-1">
        <div class="center-align" id="UpdateDate"></div>
        <div class="grey-text text-darken-3 right">Dev by MoreMeng</div>
    </footer>
    <!-- <script defer src="https://use.fontawesome.com/releases/v5.13.0/js/all.js"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <script async>
        const get_thailand = () => {
            $.ajax({
                dataType: "json",
                url: 'https://covid19.th-stat.com/api/open/today',
                method: "GET",
                async: true,
                success: function (data) {
                    $('#Confirmed').html(Number(data.Confirmed).toLocaleString());
                    $('#Recovered').html(Number(data.Recovered).toLocaleString());
                    $('#Hospitalized').html(Number(data.Hospitalized).toLocaleString());
                    $('#Deaths').html(Number(data.Deaths).toLocaleString());

                    let newConfirmed = (data.NewConfirmed > 0) ? `(เพิ่ม ${Number(data.NewConfirmed).toLocaleString()})` : ``;
                    let NewRecovered = (data.NewRecovered > 0) ? `(เพิ่ม ${Number(data.NewRecovered).toLocaleString()})` : ``;
                    let NewHospitalized = (data.NewHospitalized > 0) ? `(เพิ่ม ${Number(data.NewHospitalized).toLocaleString()})` : ``;
                    let NewDeaths = (data.NewDeaths > 0) ? `(เพิ่ม ${Number(data.NewDeaths).toLocaleString()})` : ``;

                    $('#NewConfirmed').html(newConfirmed);
                    $('#NewRecovered').html(NewRecovered);
                    $('#NewHospitalized').html(NewHospitalized);
                    $('#NewDeaths').html(NewDeaths);

                    $('#UpdateDate').html("อัพเดทข้อมูลล่าสุด : " + data.UpdateDate);
                    console.log(`${+new Date} Get new Thailand`);
                }
            });
            setTimeout(get_thailand, 1000 * 60 * 60);
        }

        const get_angthong = () => {
            // https://spreadsheets.google.com/feeds/list/1LRjBuM5WSdv0aBKbw3kU2ks0CXJwCcYe00R3xZIGu-8/1/public/values?alt=json

            // ID of the Google Spreadsheet
            let spreadsheetID = "1LRjBuM5WSdv0aBKbw3kU2ks0CXJwCcYe00R3xZIGu-8";

            // Make sure it is public or set to Anyone with link can view
            let url = "https://spreadsheets.google.com/feeds/list/" + spreadsheetID + "/1/public/values?alt=json";

            $.ajax({
                dataType: "json",
                url: url,
                method: "GET",
                async: true,
                success: function (data) {
                    $('#ผู้ป่วยติดเชื้อ').html(data.feed.entry[0].gsx$ผู้ป่วยติดเชื้อ.$t);
                    $('#ส่งตรวจห้องปฏิบัติการ').html(data.feed.entry[0].gsx$ส่งตรวจห้องปฏิบัติการ.$t);
                    $('#ไม่พบเชื้อpuiสะสม').html(Number(data.feed.entry[0].gsx$ไม่พบเชื้อpuiสะสม.$t) + Number(data.feed.entry[0].gsx$ไม่พบเชื้อhighriskสะสม.$t));
                    $('#รอผลpuiสะสม').html(Number(data.feed.entry[0].gsx$รอผลpuiสะสม.$t) + Number(data.feed.entry[0].gsx$รอผลhighriskสะสม.$t));

                    $('#เข้าอ่างทองทั้งหมด').html(data.feed.entry[0].gsx$เข้าอ่างทองทั้งหมด.$t);
                    $('#ในประเทศทั้งหมด').html(data.feed.entry[0].gsx$ในประเทศทั้งหมด.$t);
                    $('#ต่างประเทศทั้งหมด').html(data.feed.entry[0].gsx$ต่างประเทศทั้งหมด.$t);

                    $('#อยู่ระหว่างเฝ้าระวัง').html(data.feed.entry[0].gsx$อยู่ระหว่างเฝ้าระวัง.$t);
                    $('#เขตติดต่ออันตราย').html(data.feed.entry[0].gsx$เขตติดต่ออันตราย.$t);
                    $('#เขตระบาดต่อเนื่อง').html(data.feed.entry[0].gsx$เขตระบาดต่อเนื่อง.$t);
                    $('#ประเภทอื่นๆ').html(data.feed.entry[0].gsx$ประเภทอื่นๆ.$t);

                    console.log(`${+new Date} Get new Angthong`);
                }
            });
            setTimeout(get_angthong, 1000 * 60 * 60);
        }

        get_thailand()
        get_angthong()

    </script>
</body>

</html>